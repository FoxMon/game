package client;

import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

import client.*;

public class CreateRoomFrame extends JFrame {

    public JTextField tfTitle;
    public JButton btCreate;
    public JPasswordField tfPw;
    public ClientUI ui;
    public JRadioButton rbSecret;
    public JRadioButton rbTwoUser;
    public JRadioButton rbOneUser;
 
    public CreateRoomFrame(ClientUI c) {
        setTitle("\uBC29 \uB9CC\uB4E4\uAE30");
        ui = c;
        setSize(400,300);
        setLocation(400,400);
        getContentPane().setLayout(null);
        c.setLocationRelativeTo(null);
 
        // room title
        tfTitle = new JTextField();
        tfTitle.setBounds(182, 79, 116, 21);
        getContentPane().add(tfTitle);
        tfTitle.setColumns(10);    
        
        // password
        tfPw = new JPasswordField();
        tfPw.setEnabled(false);
        tfPw.setEditable(false);
        tfPw.setBounds(183, 118, 115, 21);
        getContentPane().add(tfPw);
        
        // create room success
        btCreate = new JButton("\uBC29 \uC0DD\uC131");
        btCreate.setBounds(140, 197, 97, 23);
        getContentPane().add(btCreate);   
        
        rbSecret = new JRadioButton("\uBE44\uBC00\uBC29");
        rbSecret.setBounds(159, 157, 121, 23);
        getContentPane().add(rbSecret);
        rbSecret.setFocusable(false);
        
        // one or two
        rbOneUser = new JRadioButton("1\uC778\uC6A9");
        rbOneUser.setBounds(182, 40, 62, 23);
        rbOneUser.setFocusable(false);
        getContentPane().add(rbOneUser);
        
        rbTwoUser = new JRadioButton("2\uC778\uC6A9");
        rbTwoUser.setBounds(248, 40, 67, 23);
        rbTwoUser.setSelected(true);
        rbTwoUser.setFocusable(false);
        getContentPane().add(rbTwoUser);
        
        ButtonGroup b = new ButtonGroup();
        b.add(rbOneUser);
        b.add(rbTwoUser);
 
        JLabel label = new JLabel("\uCC38\uC5EC \uC778\uC6D0 : ");
        label.setHorizontalAlignment(SwingConstants.RIGHT);
        label.setBounds(92, 44, 67, 15);
        getContentPane().add(label);
        
        JLabel lblNewLabel = new JLabel("\uBC29 \uC774\uB984 : ");
        lblNewLabel.setHorizontalAlignment(SwingConstants.RIGHT);
        lblNewLabel.setBounds(102, 82, 57, 15);
        getContentPane().add(lblNewLabel);
        
        JLabel lblNewLabel_1 = new JLabel("\uBE44\uBC00\uBC88\uD638 : ");
        lblNewLabel_1.setHorizontalAlignment(SwingConstants.RIGHT);
        lblNewLabel_1.setBounds(92, 121, 67, 15);
        getContentPane().add(lblNewLabel_1);
        
        // listener
        rbTwoUser.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                // TODO Auto-generated method stub
                tfTitle.setEditable(true);
                tfPw.setEditable(false);
                rbSecret.setEnabled(true);
                String [] titles = new String[] { "fair play.", "manner game","come.","speed game"};
                tfTitle.setText(titles[(int)(Math.random()*titles.length)]);
            }
        });
        rbOneUser.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                // TODO Auto-generated method stub
                tfTitle.setText("1인용 방입니다.");
                tfTitle.setEditable(false);
                rbSecret.setEnabled(false);
            }
        });
        rbSecret.addActionListener(new ActionListener() {
            
            @Override
            public void actionPerformed(ActionEvent e) {
                // TODO Auto-generated method stub
                if(rbSecret.isSelected()) {
                    tfPw.setEditable(true);
                    tfPw.setEnabled(true);
                } else {
                    tfPw.setEditable(false);
                    tfPw.setEnabled(false);
                }
            }
        });
        // =================================================================
        
        // 방만들기 완료 버튼 누를 시 호출할 리스너 ==================================
        ActionListener bcrfh = new BtCreateRoomFinishHandler(this);
        btCreate.addActionListener(bcrfh);
        // ========================================================================
        
        // 비밀번호 필드 or 제목 입력 필드에서 엔터 누를 시 방만들기 버튼 자동 클릭 ====
        tfTitle.addKeyListener(new KeyListener() {
            
            @Override
            public void keyReleased(KeyEvent e) {
                // TODO Auto-generated method stub
                if(e.getKeyCode() == 10) {
                    btCreate.doClick();
                }
            }
        });
        
        tfPw.addKeyListener(new KeyListener() {
            
            @Override
            public void keyReleased(KeyEvent e) {
                // TODO Auto-generated method stub
                if(e.getKeyCode() == 10) {
                    btCreate.doClick();
                }
            }
            
        });
    }
}
